#!/bin/bash
set -e

echo "ğŸ—„ï¸  Initialisation de la base de donnÃ©es Railway"
echo "================================================"
echo ""

echo "ğŸ“ Instructions :"
echo "1. Allez sur Railway â†’ Projet showroompro"
echo "2. Cliquez sur le service Backend"
echo "3. Onglet 'Shell' ou 'Terminal'"
echo "4. ExÃ©cutez ces commandes UNE PAR UNE :"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "# 1. CrÃ©er la base de donnÃ©es"
echo "yarn medusa db:create"
echo ""
echo "# 2. ExÃ©cuter les migrations"
echo "yarn medusa db:migrate"
echo ""
echo "# 3. Seed les donnÃ©es initiales"
echo "yarn run seed"
echo ""
echo "# 4. CrÃ©er l'admin"
echo "yarn medusa user -e admin@showroompro.com -p VotreMotDePasse123! -i admin"
echo ""
echo "# 5. RÃ©cupÃ©rer la clÃ© publique"
echo "yarn medusa exec 'SELECT token FROM api_key WHERE type = '\''publishable'\'';'"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“‹ OU utilisez le shell PostgreSQL pour la clÃ© :"
echo ""
echo "Dans Railway â†’ PostgreSQL â†’ Connect â†’ Shell:"
echo "SELECT token FROM api_key WHERE type = 'publishable';"
echo ""
echo "ğŸ’¾ COPIEZ la clÃ© qui commence par pk_..."
echo ""
echo "ğŸ“ Puis mettez-la dans Storefront â†’ Variables:"
echo "NEXT_PUBLIC_MEDUSA_PUBLISHABLE_KEY=pk_votre_cle_ici"
echo ""
